{"mappings":"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","sources":["src/main.js"],"sourcesContent":["const canvas = document.getElementById('canvas')\n\n// 获取文档宽度和高度，设置canvas的html属性\ncanvas.width = document.documentElement.clientWidth\ncanvas.height = document.documentElement.clientHeight\n\n// window.onresize = () => {\n//   canvas.width = document.documentElement.clientWidth\n//   canvas.height = document.documentElement.clientHeight\n// }\n\nconst ctx = canvas.getContext('2d')\n\nconst pen = document.querySelector('#pen')\nconst eraser = document.querySelector('#eraser')\nconst deleteBtn = document.querySelector('#delete')\nconst save = document.querySelector('#save')\n\nctx.lineWidth = 10 // 设置画线宽度\nctx.lineCap = 'round' // 防止转折处断开\n\nlet painting = false\nlet eraserEnabled = false\nlet last = [0, 0]\nlet pickedColor = '#000'\n\nconst initBG = () => {\n  ctx.fillStyle = '#fff'\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n  ctx.fillStyle = pickedColor\n}\n\ninitBG()\n\nconst colors = {\n  black: '#000',\n  red: '#ff1a40',\n  blue: '#1a8cff',\n  green: '#2bd965',\n  yellow: '#ffdd33',\n}\n\nconst colorPicker = document.querySelector('.colorPicker')\ncolorPicker.addEventListener('click', (e) => {\n  if (e.target !== e.currentTarget) {\n    const oldPicked = document.querySelector('.colorPicker > li.active')\n    if (oldPicked) oldPicked.classList.remove('active')\n    e.target.classList.add('active')\n    const classname = e.target.className.replace('active', '').trim()\n    pickedColor = colors[classname]\n    ctx.strokeStyle = pickedColor\n    ctx.fillStyle = pickedColor\n  }\n})\n\npen.onclick = () => {\n  eraserEnabled = false\n  pen.classList.add('active')\n  eraser.classList.remove('active')\n}\n\neraser.onclick = () => {\n  eraserEnabled = true\n  pen.classList.remove('active')\n  eraser.classList.add('active')\n}\n\ndeleteBtn.onclick = () => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n  initBG()\n}\n\nsave.onclick = () => {\n  const url = canvas.toDataURL('image/jpeg')\n  const a = document.createElement('a')\n  document.body.append(a)\n  a.href = url\n  a.download = 'my-drawing'\n  a.target = '_blank'\n  a.click()\n}\n\nconst thicknessBtn = document.querySelector('.thickness')\nconst thicknessPickerWrapper = document.querySelector(\n  '.thickness-picker-wrapper'\n)\nthicknessBtn.onclick = () => {\n  thicknessPickerWrapper.classList.add('visible')\n}\n\nthicknessPickerWrapper.onclick = (e) => {\n  if (e.target === e.currentTarget)\n    thicknessPickerWrapper.classList.remove('visible')\n}\n\nconst closeBtn = document.querySelector('#close')\ncloseBtn.onclick = () => {\n  thicknessPickerWrapper.classList.remove('visible')\n}\n\nconst thicknessHash = {\n  1: 4,\n  2: 7,\n  3: 10,\n  4: 13,\n  5: 16,\n}\n\nconst thicknessCircle = document.querySelector(\n  '.thickness > .circle-wrapper > .circle'\n)\nconst thicknessNumber = document.querySelector('.thickness > .number')\n\nconst thicknessPicker = document.querySelector('.thickness-picker > ul')\nthicknessPicker.onclick = (e) => {\n  if (e.target.nodeName === 'LI') {\n    const oldPicked = document.querySelector(\n      '.thickness-picker > ul > li.active'\n    )\n    oldPicked.classList.remove('active')\n    e.target.classList.add('active')\n\n    const num = e.target.innerText\n    ctx.lineWidth = thicknessHash[num]\n    thicknessCircle.style.width = thicknessHash[num] + 'px'\n    thicknessCircle.style.height = thicknessHash[num] + 'px'\n    thicknessNumber.innerText = num\n  }\n}\n\n// 画线函数\nfunction drawLine(lastX, lastY, newX, newY) {\n  ctx.beginPath()\n  ctx.moveTo(lastX, lastY)\n  ctx.lineTo(newX, newY)\n  ctx.stroke()\n}\n\n// 画圆\nfunction drawCircle(x, y) {\n  ctx.beginPath()\n  ctx.arc(x, y, ctx.lineWidth / 2, 0, 2 * Math.PI, true)\n  ctx.fill()\n}\n\n// 检测是否支持触屏\nvar isTouchDevice = 'ontouchstart' in document.documentElement\n\nif (isTouchDevice) {\n  canvas.ontouchstart = (e) => {\n    let x = e.touches[0].clientX\n    let y = e.touches[0].clientY\n    last = [x, y]\n    if (eraserEnabled) {\n      ctx.clearRect(x - 10, y - 10, 20, 20)\n    } else {\n      drawCircle(x, y)\n    }\n  }\n  canvas.ontouchmove = (e) => {\n    let x = e.touches[0].clientX\n    let y = e.touches[0].clientY\n    if (eraserEnabled) {\n      ctx.clearRect(x - 10, y - 10, 20, 20)\n    } else {\n      drawLine(last[0], last[1], x, y)\n      last = [x, y]\n    }\n  }\n} else {\n  canvas.onmousedown = (e) => {\n    painting = true\n    last = [e.clientX, e.clientY]\n    if (eraserEnabled) {\n      ctx.clearRect(e.clientX - 10, e.clientY - 10, 20, 20)\n    } else {\n      drawCircle(e.clientX, e.clientY)\n    }\n  }\n\n  canvas.onmousemove = (e) => {\n    if (painting === true) {\n      if (eraserEnabled) {\n        ctx.clearRect(e.clientX - 10, e.clientY - 10, 20, 20)\n      } else {\n        drawLine(last[0], last[1], e.clientX, e.clientY)\n        last = [e.clientX, e.clientY]\n      }\n    }\n  }\n\n  canvas.onmouseup = () => {\n    painting = false\n  }\n}\n"],"names":["$2b6e161c9edcf319$var$canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","$2b6e161c9edcf319$var$ctx","getContext","$2b6e161c9edcf319$var$pen","querySelector","$2b6e161c9edcf319$var$eraser","$2b6e161c9edcf319$var$deleteBtn","$2b6e161c9edcf319$var$save","lineWidth","lineCap","$2b6e161c9edcf319$var$painting","$2b6e161c9edcf319$var$eraserEnabled","$2b6e161c9edcf319$var$last","$2b6e161c9edcf319$var$pickedColor","$2b6e161c9edcf319$var$initBG","fillStyle","fillRect","$2b6e161c9edcf319$var$colors","black","red","blue","green","yellow","addEventListener","e","target","currentTarget","oldPicked","classList","remove","add","classname","className","replace","trim","strokeStyle","onclick","clearRect","url","toDataURL","a","createElement","body","append","href","download","click","$2b6e161c9edcf319$var$thicknessBtn","$2b6e161c9edcf319$var$thicknessPickerWrapper","$2b6e161c9edcf319$var$thicknessHash","$2b6e161c9edcf319$var$thicknessCircle","$2b6e161c9edcf319$var$thicknessNumber","$2b6e161c9edcf319$var$drawLine","lastX","lastY","newX","newY","beginPath","moveTo","lineTo","stroke","$2b6e161c9edcf319$var$drawCircle","x","y","arc","Math","PI","fill","nodeName","num","innerText","style","ontouchstart","touches","clientX","clientY","ontouchmove","onmousedown","onmousemove","onmouseup"],"version":3,"file":"index.e5aede63.js.map"}